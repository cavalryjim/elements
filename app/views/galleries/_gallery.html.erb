<div class="gallery">
  <h1 class="title"><%=h gallery.title %></h1>
  <h2 class="decsription"><%=h gallery.description %></h2>
  <% gallery.pictures.each do |element| %>
    <% if element.attachable.is_a?(Picture) %>
    <%= render :partial => "pictures/picture", :object => element.attachable, :locals => {:gallery_id => "gallery#{gallery.id}"} %>
    <% end %>
  <% end %>
</div>
<script>
  $("a[rel='<%= "gallery#{gallery.id}" %>']").fancybox({
    'transitionIn'		: 'none',
    'transitionOut'		: 'none',
    'titlePosition' 	: 'over',
    'titleFormat'		: function(title, currentArray, currentIndex, currentOpts) {
      return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
    }
  });
</script>