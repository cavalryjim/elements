  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mselect sqlite_version(*)[0m
  [4;36;1mSQL (10.5ms)[0m   [0;1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("schema_migrations")[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateElements (20100615125340)
  [4;35;1mSQL (0.7ms)[0m   [0mCREATE TABLE "elements" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "ancestry" varchar(255), "ancestry_depth" integer, "position" integer, "type" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100615125340')[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("elements")[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (9.9ms)[0m   [0;1mDROP TABLE "elements"[0m
  [4;35;1mSQL (3.8ms)[0m   [0mDELETE FROM schema_migrations WHERE version = '20100615125340'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateElements (20100615125340)
  [4;36;1mSQL (0.2ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCREATE TABLE "elements" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "ancestry" varchar(255), "ancestry_depth" integer DEFAULT 0, "position" integer, "type" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100615125340')[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("elements")[0m


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 13:59:47) [GET]
  [4;36;1mElement Load (0.5ms)[0m   [0;1mSELECT * FROM "elements" [0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 29ms (View: 21, DB: 1) | 200 OK [http://localhost/elements/]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 13:59:49) [GET]
Rendering template within layouts/elements
Rendering elements/new
Completed in 27ms (View: 19, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 13:59:58) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Root", "ancestry"=>"", "type"=>"", "ancestry_depth"=>"0"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;35;1mElement Create (0.4ms)[0m   [0mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('Root', NULL, '2010-06-15 12:59:58', '', '2010-06-15 12:59:58', NULL, 0)[0m
Redirected to http://localhost:3000/elements/1
Completed in 24ms (DB: 0) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 13:59:58) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 1) [0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 18ms (View: 8, DB: 0) | 200 OK [http://localhost/elements/1]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:00:01) [GET]
  [4;35;1mElement Load (0.6ms)[0m   [0mSELECT * FROM "elements" [0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 16ms (View: 8, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:00:02) [GET]
Rendering template within layouts/elements
Rendering elements/new
Completed in 83ms (View: 74, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:00:16) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"First Level", "ancestry"=>"0", "type"=>"", "ancestry_depth"=>"0"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;36;1mElement Create (0.3ms)[0m   [0;1mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('First Level', NULL, '2010-06-15 13:00:16', '0', '2010-06-15 13:00:16', NULL, 0)[0m
Redirected to http://localhost:3000/elements/2
Completed in 21ms (DB: 0) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:00:16) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) [0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 14ms (View: 4, DB: 0) | 200 OK [http://localhost/elements/2]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:00:19) [GET]
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" [0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 20ms (View: 12, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:07:07) [GET]
Rendering template within layouts/elements
Rendering elements/new
Completed in 20ms (View: 12, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:07:20) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mElement Load (1.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) [0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

ActionView::TemplateError (undefined method `roots' for #<Class:0xb6e4cd78>) on line #12 of app/views/elements/edit.html.erb:
9:   </p>
10:   <p>
11:     <%= f.label :parent %><br />
12:     <%= f.select :parent_id, nested_set_options(Element, @element) {|i| "#{'-' * i.ancestry_depth.to_i} #{i.name}" } %>
13:   </p>
14:   <p>
15:     <%= f.label :ancestry %><br />

    app/helpers/elements_helper.rb:3:in `nested_set_options'
    app/views/elements/edit.html.erb:12
    app/views/elements/edit.html.erb:3
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (52.8ms)
Rendered rescues/_request_and_response (1.6ms)
Rendering rescues/layout (internal_server_error)


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:08:38) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Completed in 29ms (View: 17, DB: 1) | 200 OK [http://localhost/elements/1/edit]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:08:45) [GET]
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:10:14) [GET]
  [4;36;1mElement Load (0.8ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 23ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:10:16) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit

ActionView::TemplateError (undefined method `builder' for #<ActionView::Helpers::FormBuilder:0xb6e3fbb4>) on line #5 of app/views/elements/edit.html.erb:
2: 
3: <% form_for(@element) do |f| %>
4:   <%= f.error_messages %>
5:   <%= render "form", :f => f.builder %>
6:   <p>
7:     <%= f.submit 'Update' %>
8:   </p>

    app/views/elements/edit.html.erb:5
    app/views/elements/edit.html.erb:3
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (119.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:11:01) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit

ActionView::TemplateError (undefined local variable or method `builder' for #<ActionView::Base:0xb6fb94b8>) on line #5 of app/views/elements/edit.html.erb:
2: 
3: <% form_for(@element) do |f| %>
4:   <%= f.error_messages %>
5:   <%= render "form", :f => builder %>
6:   <p>
7:     <%= f.submit 'Update' %>
8:   </p>

    app/views/elements/edit.html.erb:5
    app/views/elements/edit.html.erb:3
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (49.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:11:03) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit

ActionView::TemplateError (undefined local variable or method `builder' for #<ActionView::Base:0xb6e1efcc>) on line #5 of app/views/elements/edit.html.erb:
2: 
3: <% form_for(@element) do |f| %>
4:   <%= f.error_messages %>
5:   <%= render "form", :f => builder %>
6:   <p>
7:     <%= f.submit 'Update' %>
8:   </p>

    app/views/elements/edit.html.erb:5
    app/views/elements/edit.html.erb:3
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (121.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:11:04) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit

ActionView::TemplateError (undefined local variable or method `builder' for #<ActionView::Base:0xb6f4e014>) on line #5 of app/views/elements/edit.html.erb:
2: 
3: <% form_for(@element) do |f| %>
4:   <%= f.error_messages %>
5:   <%= render "form", :f => builder %>
6:   <p>
7:     <%= f.submit 'Update' %>
8:   </p>

    app/views/elements/edit.html.erb:5
    app/views/elements/edit.html.erb:3
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (49.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:11:23) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (10.2ms)
Completed in 36ms (View: 25, DB: 1) | 200 OK [http://localhost/elements/1/edit]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:11:54) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (9.7ms)
Completed in 103ms (View: 17, DB: 1) | 200 OK [http://localhost/elements/1/edit]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:11:57) [GET]
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 24ms (View: 12, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:11:59) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (9.7ms)
Completed in 32ms (View: 21, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:13:05) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;35;1mElement Load (0.3ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (9.9ms)
Completed in 26ms (View: 16, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:13:25) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;36;1mElement Load (0.2ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (8.4ms)
Completed in 28ms (View: 18, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:13:37) [GET]
  [4;35;1mElement Load (1.0ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 23ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:13:39) [GET]
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 88ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:14:14) [GET]
  [4;36;1mElement Load (1.0ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 36ms (View: 26, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:14:19) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (8.7ms)
Completed in 36ms (View: 25, DB: 1) | 200 OK [http://localhost/elements/2/edit]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:15:37) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mElement Load (0.2ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (7.4ms)
Completed in 25ms (View: 14, DB: 1) | 200 OK [http://localhost/elements/2/edit]
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mElement Load (0.7ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position LIMIT 1[0m
  [4;35;1mElement Load (0.7ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE (ancestry like '0/2/%' or ancestry = '0/2') ORDER BY position[0m
  [4;35;1mElement Update (0.5ms)[0m   [0mUPDATE "elements" SET "updated_at" = '2010-06-15 13:17:18', "ancestry" = '1', "ancestry_depth" = 1 WHERE "id" = 2[0m
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:17:42) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mElement Load (0.6ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (8.3ms)
Completed in 29ms (View: 16, DB: 1) | 200 OK [http://localhost/elements/2/edit]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:17:44) [GET]
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 24ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:17:47) [GET]
  [4;36;1mElement Load (0.8ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (7.5ms)[0m   [0;1mDROP TABLE "elements"[0m
  [4;35;1mSQL (2.6ms)[0m   [0mDELETE FROM schema_migrations WHERE version = '20100615125340'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:25:40) [GET]
  [4;36;1mElement Load (0.0ms)[0m   [0;1mSQLite3::SQLException: no such table: elements: SELECT * FROM "elements" ORDER BY position[0m

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such table: elements: SELECT * FROM "elements"  ORDER BY position):
  app/controllers/elements_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.3ms)
Rendered rescues/_request_and_response (65.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateElements (20100615125340)
  [4;36;1mSQL (0.2ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCREATE TABLE "elements" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "ancestry" varchar(255), "ancestry_depth" integer DEFAULT 0, "position" integer, "type" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("elements")[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCREATE INDEX "index_elements_on_ancestry" ON "elements" ("ancestry")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100615125340')[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mPRAGMA index_list("elements")[0m
  [4;35;1mSQL (0.2ms)[0m   [0mPRAGMA index_info('index_elements_on_ancestry')[0m


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:25:55) [GET]
  [4;35;1mElement Load (0.7ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 27ms (View: 16, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:25:57) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
Rendered elements/_form (8.6ms)
Completed in 34ms (View: 23, DB: 0) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:26:03) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Root", "type"=>"", "parent_id"=>"0"}}
WARNING: Can't mass-assign these protected attributes: type, parent_id
  [4;35;1mElement Create (1.2ms)[0m   [0mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('Root', NULL, '2010-06-15 13:26:03', NULL, '2010-06-15 13:26:03', NULL, 0)[0m
Redirected to http://localhost:3000/elements/1
Completed in 31ms (DB: 1) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:26:03) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 21ms (View: 9, DB: 0) | 200 OK [http://localhost/elements/1]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:26:04) [GET]
  [4;35;1mElement Load (0.7ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 20ms (View: 10, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:26:05) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;36;1mElement Load (0.6ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
Rendered elements/_form (11.5ms)
Completed in 93ms (View: 82, DB: 1) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:26:13) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"First Level", "type"=>"", "parent_id"=>"1"}}
WARNING: Can't mass-assign these protected attributes: type, parent_id
  [4;36;1mElement Create (0.3ms)[0m   [0;1mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('First Level', NULL, '2010-06-15 13:26:13', NULL, '2010-06-15 13:26:13', NULL, 0)[0m
Redirected to http://localhost:3000/elements/2
Completed in 27ms (DB: 0) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:26:13) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 17ms (View: 5, DB: 0) | 200 OK [http://localhost/elements/2]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:26:15) [GET]
  [4;36;1mElement Load (0.8ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:27:23) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"First Level", "type"=>"", "parent_id"=>"1"}}
WARNING: Can't mass-assign these protected attributes: type, parent_id
  [4;35;1mElement Create (0.3ms)[0m   [0mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('First Level', NULL, '2010-06-15 13:27:23', NULL, '2010-06-15 13:27:23', NULL, 0)[0m
Redirected to http://localhost:3000/elements/3
Completed in 28ms (DB: 0) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:27:23) [GET]
  Parameters: {"id"=>"3"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 3) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 16ms (View: 5, DB: 0) | 200 OK [http://localhost/elements/3]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:27:25) [GET]
  [4;35;1mElement Load (0.9ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 28ms (View: 19, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:27:27) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;36;1mElement Load (0.5ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE (id = 2 or ancestry like '2/%' or ancestry = '2') ORDER BY position[0m
  [4;36;1mElement Load (0.5ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 3 or ancestry like '3/%' or ancestry = '3') ORDER BY position[0m
Rendered elements/_form (16.8ms)
Completed in 111ms (View: 99, DB: 3) | 200 OK [http://localhost/elements/2/edit]


Processing ElementsController#update (for 127.0.0.1 at 2010-06-15 14:27:31) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "id"=>"2", "element"=>{"position"=>"", "name"=>"First Level", "parent"=>"1", "type"=>""}}
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
WARNING: Can't mass-assign these protected attributes: type

NoMethodError (undefined method `child_ancestry' for "1":String):
  ancestry (1.2.0) [v] lib/ancestry/instance_methods.rb:102:in `parent='
  app/controllers/elements_controller.rb:62
  app/controllers/elements_controller.rb:61:in `update'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.2ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing ElementsController#update (for 127.0.0.1 at 2010-06-15 14:27:47) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "id"=>"2", "element"=>{"position"=>"", "name"=>"First Level", "parent"=>"1", "type"=>""}}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
WARNING: Can't mass-assign these protected attributes: parent, type
Redirected to http://localhost:3000/elements/2
Completed in 16ms (DB: 0) | 302 Found [http://localhost/elements/2]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:27:47) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 15ms (View: 4, DB: 0) | 200 OK [http://localhost/elements/2]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:27:49) [GET]
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 27ms (View: 17, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#destroy (for 127.0.0.1 at 2010-06-15 14:27:52) [DELETE]
  Parameters: {"authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "id"=>"2"}
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 2) ORDER BY position[0m
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE (ancestry like '2/%' or ancestry = '2') ORDER BY position[0m
  [4;35;1mElement Destroy (0.2ms)[0m   [0mDELETE FROM "elements" WHERE "id" = 2[0m
Redirected to http://localhost:3000/elements
Completed in 28ms (DB: 1) | 302 Found [http://localhost/elements/2]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:27:52) [GET]
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 25ms (View: 14, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#destroy (for 127.0.0.1 at 2010-06-15 14:27:54) [DELETE]
  Parameters: {"authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "id"=>"3"}
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 3) ORDER BY position[0m
  [4;36;1mElement Load (0.3ms)[0m   [0;1mSELECT * FROM "elements" WHERE (ancestry like '3/%' or ancestry = '3') ORDER BY position[0m
  [4;35;1mElement Destroy (0.3ms)[0m   [0mDELETE FROM "elements" WHERE "id" = 3[0m
Redirected to http://localhost:3000/elements
Completed in 28ms (DB: 1) | 302 Found [http://localhost/elements/3]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:27:54) [GET]
  [4;36;1mElement Load (0.7ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 20ms (View: 10, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:27:56) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;36;1mElement Load (0.5ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
Rendered elements/_form (10.8ms)
Completed in 31ms (View: 19, DB: 1) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:28:02) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"First Level", "type"=>"", "parent_id"=>"1"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
  [4;36;1mElement Create (0.4ms)[0m   [0;1mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('First Level', NULL, '2010-06-15 13:28:02', '1', '2010-06-15 13:28:02', NULL, 1)[0m
Redirected to http://localhost:3000/elements/4
Completed in 23ms (DB: 1) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:28:03) [GET]
  Parameters: {"id"=>"4"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 4) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 15ms (View: 4, DB: 0) | 200 OK [http://localhost/elements/4]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:28:04) [GET]
  [4;36;1mElement Load (0.8ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 25ms (View: 14, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:28:08) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;36;1mElement Load (0.6ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
Rendered elements/_form (10.2ms)
Completed in 27ms (View: 15, DB: 1) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:28:18) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Second Level", "type"=>"", "parent_id"=>"4"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 4) ORDER BY position[0m
  [4;36;1mElement Create (0.3ms)[0m   [0;1mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('Second Level', NULL, '2010-06-15 13:28:18', '1/4', '2010-06-15 13:28:18', NULL, 2)[0m
Redirected to http://localhost:3000/elements/5
Completed in 1464ms (DB: 1) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:28:20) [GET]
  Parameters: {"id"=>"5"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 5) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 15ms (View: 4, DB: 0) | 200 OK [http://localhost/elements/5]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:28:23) [GET]
  [4;36;1mElement Load (1.2ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 39ms (View: 25, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:28:27) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;36;1mElement Load (0.7ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
Rendered elements/_form (11.0ms)
Completed in 27ms (View: 15, DB: 1) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:28:36) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Third Level", "type"=>"", "parent_id"=>"5"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 5) ORDER BY position[0m
  [4;36;1mElement Create (0.4ms)[0m   [0;1mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('Third Level', NULL, '2010-06-15 13:28:36', '1/4/5', '2010-06-15 13:28:36', NULL, 3)[0m
Redirected to http://localhost:3000/elements/6
Completed in 87ms (DB: 1) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:28:36) [GET]
  Parameters: {"id"=>"6"}
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 6) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 17ms (View: 5, DB: 0) | 200 OK [http://localhost/elements/6]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:28:38) [GET]
  [4;36;1mElement Load (1.2ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 32ms (View: 21, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:28:57) [GET]
  [4;35;1mElement Load (1.3ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 36ms (View: 26, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:29:10) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;36;1mElement Load (0.5ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
Rendered elements/_form (10.3ms)
Completed in 26ms (View: 15, DB: 1) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:29:14) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Root2", "type"=>"", "parent_id"=>"0"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;36;1mElement Load (0.2ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 0) ORDER BY position[0m

ActiveRecord::RecordNotFound (Couldn't find Element with ID=0):
  ancestry (1.2.0) [v] lib/ancestry/instance_methods.rb:106:in `parent_id='
  app/controllers/elements_controller.rb:43:in `new'
  app/controllers/elements_controller.rb:43:in `create'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (119.7ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (not_found)


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:29:50) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Root2", "type"=>"", "parent_id"=>"0"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;35;1mElement Load (0.2ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 0) ORDER BY position[0m

ActiveRecord::RecordNotFound (Couldn't find Element with ID=0):
  ancestry (1.2.0) [v] lib/ancestry/instance_methods.rb:106:in `parent_id='
  app/controllers/elements_controller.rb:43:in `new'
  app/controllers/elements_controller.rb:43:in `create'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.7ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (not_found)


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:29:52) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;36;1mElement Load (0.5ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
Rendered elements/_form (10.7ms)
Completed in 27ms (View: 15, DB: 1) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:30:01) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"Root2", "type"=>"", "parent_id"=>""}}
WARNING: Can't mass-assign these protected attributes: type
  [4;36;1mElement Create (0.3ms)[0m   [0;1mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('Root2', NULL, '2010-06-15 13:30:01', NULL, '2010-06-15 13:30:01', NULL, 0)[0m
Redirected to http://localhost:3000/elements/7
Completed in 25ms (DB: 0) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:30:01) [GET]
  Parameters: {"id"=>"7"}
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 7) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 15ms (View: 4, DB: 1) | 200 OK [http://localhost/elements/7]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:30:04) [GET]
  [4;36;1mElement Load (1.2ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 37ms (View: 25, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#new (for 127.0.0.1 at 2010-06-15 14:30:52) [GET]
Rendering template within layouts/elements
Rendering elements/new
  [4;35;1mElement Load (0.6ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
  [4;35;1mElement Load (0.5ms)[0m   [0mSELECT * FROM "elements" WHERE (id = 7 or ancestry like '7/%' or ancestry = '7') ORDER BY position[0m
Rendered elements/_form (13.5ms)
Completed in 31ms (View: 17, DB: 2) | 200 OK [http://localhost/elements/new]


Processing ElementsController#create (for 127.0.0.1 at 2010-06-15 14:31:16) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "element"=>{"position"=>"", "name"=>"First Level Item 2", "type"=>"", "parent_id"=>"1"}}
WARNING: Can't mass-assign these protected attributes: type
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
  [4;35;1mElement Create (0.3ms)[0m   [0mINSERT INTO "elements" ("name", "position", "created_at", "ancestry", "updated_at", "type", "ancestry_depth") VALUES('First Level Item 2', NULL, '2010-06-15 13:31:16', '1', '2010-06-15 13:31:16', NULL, 1)[0m
Redirected to http://localhost:3000/elements/8
Completed in 25ms (DB: 1) | 302 Found [http://localhost/elements]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:31:16) [GET]
  Parameters: {"id"=>"8"}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 8) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 16ms (View: 4, DB: 0) | 200 OK [http://localhost/elements/8]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:31:17) [GET]
  [4;35;1mElement Load (1.3ms)[0m   [0mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 38ms (View: 28, DB: 1) | 200 OK [http://localhost/elements]


Processing ElementsController#edit (for 127.0.0.1 at 2010-06-15 14:31:20) [GET]
  Parameters: {"id"=>"4"}
  [4;36;1mElement Load (0.9ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 4) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/edit
  [4;35;1mElement Load (0.8ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."ancestry" IS NULL) ORDER BY position[0m
  [4;36;1mElement Load (1.0ms)[0m   [0;1mSELECT * FROM "elements" WHERE (id = 1 or ancestry like '1/%' or ancestry = '1') ORDER BY position[0m
  [4;35;1mElement Load (0.7ms)[0m   [0mSELECT * FROM "elements" WHERE (id = 7 or ancestry like '7/%' or ancestry = '7') ORDER BY position[0m
Rendered elements/_form (13.9ms)
Completed in 32ms (View: 18, DB: 3) | 200 OK [http://localhost/elements/4/edit]


Processing ElementsController#update (for 127.0.0.1 at 2010-06-15 14:31:24) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"Ns8veOOHxy4gkKP02sGh4mPQAohWB2VmeuZD/K/3gFs=", "id"=>"4", "element"=>{"position"=>"", "name"=>"First Level Item 1", "type"=>"", "parent_id"=>"1"}}
  [4;36;1mElement Load (0.4ms)[0m   [0;1mSELECT * FROM "elements" WHERE ("elements"."id" = 4) ORDER BY position[0m
WARNING: Can't mass-assign these protected attributes: type
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 1) ORDER BY position[0m
  [4;36;1mElement Update (0.3ms)[0m   [0;1mUPDATE "elements" SET "updated_at" = '2010-06-15 13:31:24', "name" = 'First Level Item 1' WHERE "id" = 4[0m
Redirected to http://localhost:3000/elements/4
Completed in 92ms (DB: 1) | 302 Found [http://localhost/elements/4]


Processing ElementsController#show (for 127.0.0.1 at 2010-06-15 14:31:24) [GET]
  Parameters: {"id"=>"4"}
  [4;35;1mElement Load (0.4ms)[0m   [0mSELECT * FROM "elements" WHERE ("elements"."id" = 4) ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/show
Completed in 17ms (View: 4, DB: 0) | 200 OK [http://localhost/elements/4]


Processing ElementsController#index (for 127.0.0.1 at 2010-06-15 14:31:26) [GET]
  [4;36;1mElement Load (1.3ms)[0m   [0;1mSELECT * FROM "elements" ORDER BY position[0m
Rendering template within layouts/elements
Rendering elements/index
Completed in 38ms (View: 27, DB: 1) | 200 OK [http://localhost/elements]
